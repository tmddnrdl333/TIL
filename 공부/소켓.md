# 소켓

## 소켓 통신

- 일반적으로 서버는 특정 포트가 바인딩된 소켓을 가지고 특정 컴퓨터 위에서 돌아간다.
  해당 서버는 클라이언트의 연결 요청을 소켓을 통해 리스닝하면서 기다린다.

- 클라이언트는 서버가 떠 있는 머신의 호스트네임과 서버가 리스닝하고 있는 포트 번호를 알고 있다. 따라서 클라이언트는 이 호스트 네임과 포트 번호를 통해 서버와의 연결을 시도하게 된다.
  또한 클라이언트는 서버 상대로 자신을 식별시켜주기 위해 연결 동안 사용될 로컬 포트에 바인딩된다. 이 포트 바인딩 작업은 보통 시스템에 의해 이루어진다.

- 만약 모든 게 순조롭게 이루어진다면, 서버는 연결을 수락한다.
  수락하자마자, 서버는 동일 로컬 포트에 바인딩된 **새로운 소켓**을 얻게되며, 클라이언트 주소와 포트로 세팅된 리모트 엔드 포인트를 갖게 된다.
  서버가 별개의 새로운 소켓이 필요한 이유는, 연결된 클라이언트의 요청을 처리하면서, 동시에 기존 소켓을 통해서는 지속적으로 연결 요청을 받아야 하기 때문이다.

- 클라이언트 입장에서는 만약 연결이 수락되면, 소켓은 성공적으로 생성되며, 클라이언트는 서버와 통신하기 위해 소켓을 사용할 수 있게 된다.

- 클라이언트와 서버는 이제 소켓에 데이터를 쓰거나 읽음으로써 통신이 가능해진다.

## 소켓의 정의

- 소켓(Socket)은 프로세스가 드넓은 네트워크 세계로 데이터를 보내거나, 혹은 그로부터 데이터를 받기 위한 실제적 창구 역할을 한다. 그러므로 프로세스가 데이터를 송수신하기 위해서는 반드시 소켓을 열어, 소켓에 데이터를 써보내거나 소켓으로부터 데이터를 읽어들여야 한다.

- 소켓은 **프로토콜, IP주소, 포트 넘버**로 정의된다.
  
  - 프로토콜: 어떤 시스템이 다른 시스템과 통신을 원활하게 수용하도록 해주는 통신 규약
  
  - IP: 전 세계 컴퓨터에 부여된 고유 식별 주소
  
  - 포트: 네트워크 상에서 통신하기 위해 호스트 내부적으로 프로세스가 할당받아야 하는 고유 숫자. 한 호스트 내에서 네트워크 통신을 하고 있는 프로세스를 식별하기 위해 사용되는 값으로, 같은 호스트 내에서 서로 다른 프로세스가 같은 포트 넘버를 가질 수 없다. 즉, 컴퓨터 내에서 프로그램을 식별하는 번호이다.

- 소켓은 네트워크 상에서 돌아가는 두 개의 프로그램 간 양방향 통신의 하나의 엔드 포인트이다.
  소켓은 포트 번호에 바인딩되어 TCP 레이어에서 데이터가 전달되어야하는 어플리케이션을 식별할 수 있게 한다.

## 엔드 포인트란?

- 여기서 엔드 포인트는, IP 주소와 포트 번호의 조합을 의미한다.
  모든 TCP 연결은 두 개의 엔드 포인트로 유일하게 식별될 수 있다. 따라서 클라이언트와 서버 간 여러 개의 연결이 맺어질 수 있다.

## Socket 클래스

- 자바 플랫폼에서 `java.net` 패키지는 네트워크 상에서 두 개의 프로그램 간 양방향 통신에서 한쪽 지점을 구현하는 `Socket`클래스를 제공한다. `Socket`클래스는 특정 시스템의 세부사항은 감추면서 플랫폼 독립적인 구현의 최상단에 위치한다. 네이티브 코드에 의존하는 대신, `java.net.Socket`클래스를 이용해서 플랫폼 독립적인 방식으로 네트워크 상에서 통신을 할 수 있다.

- 추가적으로 `java.net`패키지는 서버가 클라이언트로부터 연결을 리스닝하고 수락하는데 사용되는 소켓을 구현하는 `ServerSocket`클래스도 포함한다.

## Web 통신

- Web 통신을 하려고 한다면, `URL`클래스와 관련 클래스(`URLConnection`, `URLEncoder`)들이 본 소켓 클래스보다 적당할 것이다. 사실상, `URL`은 Web에 대한 상대적으로 고수준의 연결이며, 기저 구현으로 소켓을 사용한다. URL을 통한 Web통신 관련해서는 
